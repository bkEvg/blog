{% extends "blog/base.html" %}
{% load blog_tags %}
{% block title %}My Blog{% endblock %}
{% block content %}
  {% if search %}
    <div class="post col-md-12">
      <h2>Search results...</h2>
    </div>
  {% endif %}
  {% for post in posts %}
    <div class="post col-xl-6">
        <div class="post-thumbnail">
            <a href="{{ post.get_absolute_url }}">
                <img src="{{ post.cover.url }}" alt="Обложка поста" class="img-fluid">
            </a>
        </div>
        <div class="post-details">
          <div class="post-meta d-flex justify-content-between">
            <div class="date meta-last">{{ post.updated|date:'j E, Y' }}</div>
            <div class="category">
              {% for tag in post.tags.all|slice:':2' %}
                <a href="{% url 'post_list_by_tag' tag.slug %}">{{ tag.name }}</a>
              {% endfor %}</div>
          </div><a href="{{ post.get_absolute_url }}">
            <h3 class="h4">{{ post.title }}</h3></a>
          <p class="text-muted" style="margin-top: -20px;">{{ post.body|truncatewords:30|safe }}</p>
          <div class="post-footer d-flex align-items-center">
            <a href="#" class="author d-flex align-items-center flex-wrap">
              <div class="avatar"><img src="{{ post.author.profile_image.url }}" alt="Фото профиля" class="img-fluid"></div>
              <div class="title"><span>{{ post.author.get_full_name }}</span></div>
            </a>
            <div class="views"><i class="icon-eye"></i> {{ post.views.all|length }}</div>
            <div class="comments meta-last"><i class="icon-comment"></i>12</div>
          </div>
        </div>
    </div>
  {% empty %}
    <div class="post col-xl-6">
      <h2>Here is nothing, try smt else</h2>
    </div>
  {% endfor %}
{% endblock %}